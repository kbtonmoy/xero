!function(e){null==e.fn.ajaxForm&&e.getScript(("https:"==document.location.protocol?"https://":"http://")+"malsup.github.io/jquery.form.js");var a={};a.fileapi=void 0!==e("<input type='file'/>").get(0).files,a.formdata=void 0!==window.FormData,e.fn.uploadFile=function(t){function r(){x||(x=!0,function e(){if(m.sequential||(m.sequentialCount=99999),0==C.length&&0==b.length)m.afterUploadAll&&m.afterUploadAll(g),x=!1;else{if(b.length<m.sequentialCount){var a=C.shift();null!=a&&(b.push(a),a.removeClass(g.formGroup),a.submit())}window.setTimeout(e,100)}}())}function o(e){var a="",t=e/1024;parseInt(t)>1024?a=(t/1024).toFixed(2)+" MB":a=t.toFixed(2)+" KB";return a}function s(a){var t,r,o=[],s=(o="string"==jQuery.type(a)?a.split("&"):e.param(a).split("&")).length,l=[];for(t=0;s>t;t++)o[t]=o[t].replace(/\+/g," "),r=o[t].split("="),l.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return l}function l(a,t,r){for(var l=0;l<r.length;l++)if(i(t,a,r[l].name))if(a.allowDuplicates||!n(t,r[l].name))if(-1!=a.maxFileSize&&r[l].size>a.maxFileSize)a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[l].name+"</b> "+a.sizeErrorStr+o(a.maxFileSize)+"</div>").appendTo(t.errorLog);else if(-1!=a.maxFileCount&&t.selectedFiles>=a.maxFileCount)a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[l].name+"</b> "+a.maxFileCountErrorStr+a.maxFileCount+"</div>").appendTo(t.errorLog);else{t.selectedFiles++,t.existingFileNames.push(r[l].name);var d=a,u=new FormData,p=a.fileName.replace("[]","");u.append(p,r[l]);var c=a.formData;if(c)for(var m=s(c),v=0;v<m.length;v++)m[v]&&u.append(m[v][0],m[v][1]);d.fileData=u;var g,w=new h(t,a),C="";if(r[l]&&r[l].name)if(r[l].name.match(/<[^>]*>?/gm))g="filename."+r[l].name.split(".").pop();else g=r[l].name;C=a.showFileCounter?t.fileCounter+a.fileCounterStyle+g:g,a.showFileSize&&(C+=" ("+o(r[l].size)+")"),w.filename.html(C);var b=e("<form style='display:block; position:absolute;left: 150px;' class='"+t.formGroup+"' method='"+a.method+"' action='"+a.url+"' enctype='"+a.enctype+"'></form>");b.appendTo("body");var x=[];x.push(r[l].name),f(b,d,w,x,t,r[l]),t.fileCounter++}else a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[l].name+"</b> "+a.duplicateErrorStr+"</div>").appendTo(t.errorLog);else a.showError&&e("<div class='"+a.errorClass+"'><b>"+r[l].name+"</b> "+a.extErrorStr+a.allowedTypes+"</div>").appendTo(t.errorLog)}function i(e,a,t){var r=a.allowedTypes.toLowerCase().split(/[\s,]+/g),o=t.split(".").pop().toLowerCase();return!("*"!=a.allowedTypes&&jQuery.inArray(o,r)<0)}function n(e,a){var t=!1;if(e.existingFileNames.length)for(var r=0;r<e.existingFileNames.length;r++)(e.existingFileNames[r]==a||m.duplicateStrict&&e.existingFileNames[r].toLowerCase()==a.toLowerCase())&&(t=!0);return t}function d(e,a){if(e.existingFileNames.length)for(var t=0;t<a.length;t++){var r=e.existingFileNames.indexOf(a[t]);-1!=r&&e.existingFileNames.splice(r,1)}}function u(a,t){if(a.showFileCounter){var r=e(t.container).find(".ajax-file-upload-filename").length;t.fileCounter=r+1,e(t.container).find(".ajax-file-upload-filename").each(function(t,o){var s=e(this).html().split(a.fileCounterStyle),l=(parseInt(s[0]),r+a.fileCounterStyle+s[1]);e(this).html(l),r--})}}function p(t,r,o,s){var n="ajax-upload-id-"+(new Date).getTime(),d=e("<form method='"+o.method+"' action='"+o.url+"' enctype='"+o.enctype+"'></form>"),c="<input type='file' id='"+n+"' name='"+o.fileName+"' accept='"+o.acceptFiles+"'/>";o.multiple&&(o.fileName.indexOf("[]")!=o.fileName.length-2&&(o.fileName+="[]"),c="<input type='file' id='"+n+"' name='"+o.fileName+"' accept='"+o.acceptFiles+"' multiple/>");var m=e(c).appendTo(d);m.change(function(){t.errorLog.html("");var n=(o.allowedTypes.toLowerCase().split(","),[]);if(this.files){for(w=0;w<this.files.length;w++)n.push(this.files[w].name);if(0==o.onSelect(this.files))return}else{var c=e(this).val(),m=[];if(n.push(c),!i(0,o,c))return void(o.showError&&e("<div class='"+o.errorClass+"'><b>"+c+"</b> "+o.extErrorStr+o.allowedTypes+"</div>").appendTo(t.errorLog));if(m.push({name:c,size:"NA"}),0==o.onSelect(m))return}if(u(o,t),s.unbind("click"),d.hide(),p(t,r,o,s),d.addClass(r),o.serialize&&a.fileapi&&a.formdata){d.removeClass(r);var v=this.files;d.remove(),l(o,t,v)}else{for(var g="",w=0;w<n.length;w++)g+=o.showFileCounter?t.fileCounter+o.fileCounterStyle+n[w]+"<br>":n[w]+"<br>",t.fileCounter++;if(-1!=o.maxFileCount&&t.selectedFiles+n.length>o.maxFileCount)return void(o.showError&&e("<div class='"+o.errorClass+"'><b>"+g+"</b> "+o.maxFileCountErrorStr+o.maxFileCount+"</div>").appendTo(t.errorLog));t.selectedFiles+=n.length;var C=new h(t,o);C.filename.html(g),f(d,o,C,n,t,null)}}),o.nestedForms?(d.css({margin:0,padding:0}),s.css({position:"relative",overflow:"hidden",cursor:"default"}),m.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),d.appendTo(s)):(d.appendTo(e("body")),d.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),-1!=navigator.appVersion.indexOf("MSIE ")?s.attr("for",n):s.click(function(){m.click()}))}function c(a,t){return this.statusbar=e("<div class='ajax-file-upload-statusbar'></div>").width(t.statusBarWidth),this.preview=e("<img class='ajax-file-upload-preview' />").width(t.previewWidth).height(t.previewHeight).appendTo(this.statusbar).hide(),this.filename=e("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar),this.progressDiv=e("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=e("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv),this.abort=e("<div>"+t.abortStr+"</div>").appendTo(this.statusbar).hide(),this.cancel=e("<div>"+t.cancelStr+"</div>").appendTo(this.statusbar).hide(),this.done=e("<div>"+t.doneStr+"</div>").appendTo(this.statusbar).hide(),this.download=e("<div>"+t.downloadStr+"</div>").appendTo(this.statusbar).hide(),this.del=e("<div>"+t.deletelStr+"</div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function h(a,t){var r=null;return(r=t.customProgressBar?new t.customProgressBar(a,t):new c(a,t)).abort.addClass(a.formGroup),r.abort.addClass(t.abortButtonClass),r.cancel.addClass(a.formGroup),r.cancel.addClass(t.cancelButtonClass),t.extraHTML&&(r.extraHTML=e("<div class='extrahtml'>"+t.extraHTML()+"</div>").insertAfter(r.filename)),"bottom"==t.uploadQueueOrder?e(a.container).append(r.statusbar):e(a.container).prepend(r.statusbar),r}function f(t,o,l,i,n,p){var c={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:o.method,data:o.formData,formData:o.fileData,dataType:o.returnType,beforeSubmit:function(a,r,p){if(0!=o.onSubmit.call(this,i)){if(o.dynamicFormData){var c=s(o.dynamicFormData());if(c)for(var h=0;h<c.length;h++)c[h]&&(null!=o.fileData?p.formData.append(c[h][0],c[h][1]):p.data[c[h][0]]=c[h][1])}return o.extraHTML&&e(l.extraHTML).find("input,select,textarea").each(function(a,t){null!=o.fileData?p.formData.append(e(this).attr("name"),e(this).val()):p.data[e(this).attr("name")]=e(this).val()}),!0}return l.statusbar.append("<div class='"+o.errorClass+"'>"+o.uploadErrorStr+"</div>"),l.cancel.show(),t.remove(),l.cancel.click(function(){C.splice(C.indexOf(t),1),d(n,i),l.statusbar.remove(),o.onCancel.call(n,i,l),n.selectedFiles-=i.length,u(o,n)}),!1},beforeSend:function(e,t){l.progressDiv.show(),l.cancel.hide(),l.done.hide(),o.showAbort&&(l.abort.show(),l.abort.click(function(){d(n,i),e.abort(),n.selectedFiles-=i.length,o.onAbort.call(n,i,l)})),a.formdata?l.progressbar.width("1%"):l.progressbar.width("5%")},uploadProgress:function(e,a,t,r){r>98&&(r=98);var s=r+"%";r>1&&l.progressbar.width(s),o.showProgress&&(l.progressbar.html(s),l.progressbar.css("text-align","center"))},success:function(a,r,s){if(l.cancel.remove(),b.pop(),"json"==o.returnType&&"object"==e.type(a)&&a.hasOwnProperty(o.customErrorKeyStr)){l.abort.hide();var p=a[o.customErrorKeyStr];return o.onError.call(this,i,200,p,l),o.showStatusAfterError?(l.progressDiv.hide(),l.statusbar.append("<span class='"+o.errorClass+"'>ERROR: "+p+"</span>")):(l.statusbar.hide(),l.statusbar.remove()),n.selectedFiles-=i.length,void t.remove()}n.responses.push(a),l.progressbar.width("100%"),o.showProgress&&(l.progressbar.html("100%"),l.progressbar.css("text-align","center")),l.abort.hide(),o.onSuccess.call(this,i,a,s,l),o.showStatusAfterSuccess?(o.showDone?(l.done.show(),l.done.click(function(){l.statusbar.hide("slow"),l.statusbar.remove()})):l.done.hide(),o.showDelete?(l.del.show(),l.del.click(function(){d(n,i),l.statusbar.hide().remove(),o.deleteCallback&&o.deleteCallback.call(this,a,l),n.selectedFiles-=i.length,u(o,n)})):l.del.hide()):(l.statusbar.hide("slow"),l.statusbar.remove()),o.showDownload&&(l.download.show(),l.download.click(function(){o.downloadCallback&&o.downloadCallback(a)})),t.remove()},error:function(e,a,r){l.cancel.remove(),b.pop(),l.abort.hide(),"abort"==e.statusText?(l.statusbar.hide("slow").remove(),u(o,n)):(o.onError.call(this,i,a,r,l),o.showStatusAfterError?(l.progressDiv.hide(),l.statusbar.append("<span class='"+o.errorClass+"'>ERROR: "+r+"</span>")):(l.statusbar.hide(),l.statusbar.remove()),n.selectedFiles-=i.length),t.remove()}};o.showPreview&&null!=p&&"image"==p.type.toLowerCase().split("/").shift()&&function(e,a){if(e){a.show();var t=new FileReader;t.onload=function(e){a.attr("src",e.target.result)},t.readAsDataURL(e)}}(p,l.preview),o.autoSubmit?(t.ajaxForm(c),C.push(t),r()):(o.showCancel&&(l.cancel.show(),l.cancel.click(function(){C.splice(C.indexOf(t),1),d(n,i),t.remove(),l.statusbar.remove(),o.onCancel.call(n,i,l),n.selectedFiles-=i.length,u(o,n)})),t.ajaxForm(c))}var m=e.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(e){},onSelect:function(e){return!0},onSubmit:function(e,a){},onSuccess:function(e,a,t,r){},onError:function(e,a,t,r){},onCancel:function(e,a){},onAbort:function(e,a){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b><i class='fa fa-arrows-alt'></i> "+upload_lang_drag_drop_files+"</b></span>",uploadStr:"<i class='fa fa-cloud-upload-alt'></i> "+upload_lang_upload,abortStr:"<i class='fa fa-ban'></i> "+upload_lang_abort,cancelStr:"<i class='fa fa-remove'></i> "+upload_lang_cancel,deletelStr:"<i class='fa fa-trash'></i> "+upload_lang_delete,doneStr:"<i class='fa fa-check-circle'></i> "+upload_lang_done,multiDragErrorStr:upload_lang_multiple_file_drag_drop_is_not_allowed,extErrorStr:upload_lang_is_not_allowed_allowed_extensions,duplicateErrorStr:upload_lang_is_not_allowed_file_already_exists,sizeErrorStr:upload_lang_is_not_allowed_allowed_max_size,uploadErrorStr:upload_lang_upload_is_not_allowed,maxFileCountErrorStr:" "+upload_lang_is_not_allowed_maximum_allowed_files_are,downloadStr:"<i class='fa fa-download'></i> "+upload_lang_download,customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueueOrder:"top"},t);this.fileCounter=1,this.selectedFiles=0;var v="ajax-file-upload-"+(new Date).getTime();this.formGroup=v,this.errorLog=e("<div></div>"),this.responses=[],this.existingFileNames=[],a.formdata||(m.dragDrop=!1),a.formdata||(m.multiple=!1),e(this).html("");var g=this,w=e("<div>"+m.uploadStr+"</div>");e(w).addClass(m.uploadButtonClass),function a(){if(e.fn.ajaxForm){if(m.dragDrop){var t=e('<div class="'+m.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(m.dragdropWidth);e(g).append(t),e(t).append(w),e(t).append(e(m.dragDropStr)),function(a,t,r){r.on("dragenter",function(a){a.stopPropagation(),a.preventDefault(),e(this).addClass(t.dragDropHoverClass)}),r.on("dragover",function(a){a.stopPropagation(),a.preventDefault();var r=e(this);r.hasClass(t.dragDropContainerClass)&&!r.hasClass(t.dragDropHoverClass)&&r.addClass(t.dragDropHoverClass)}),r.on("drop",function(r){r.preventDefault(),e(this).removeClass(t.dragDropHoverClass),a.errorLog.html("");var o=r.originalEvent.dataTransfer.files;return!t.multiple&&o.length>1?void(t.showError&&e("<div class='"+t.errorClass+"'>"+t.multiDragErrorStr+"</div>").appendTo(a.errorLog)):void(0!=t.onSelect(o)&&l(t,a,o))}),r.on("dragleave",function(a){e(this).removeClass(t.dragDropHoverClass)}),e(document).on("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),e(document).on("dragover",function(a){a.stopPropagation(),a.preventDefault();var r=e(this);r.hasClass(t.dragDropContainerClass)||r.removeClass(t.dragDropHoverClass)}),e(document).on("drop",function(a){a.stopPropagation(),a.preventDefault(),e(this).removeClass(t.dragDropHoverClass)})}(g,m,t)}else e(g).append(w);e(g).append(g.errorLog),m.showQueueDiv?g.container=e("#"+m.showQueueDiv):g.container=e("<div class='ajax-file-upload-container'></div>").insertAfter(e(g)),m.onLoad.call(this,g),p(g,v,m,w)}else window.setTimeout(a,10)}(),this.startUpload=function(){e("form").each(function(a,t){e(this).hasClass(g.formGroup)&&C.push(e(this))}),C.length>=1&&r()},this.getFileCount=function(){return g.selectedFiles},this.stopUpload=function(){e("."+m.abortButtonClass).each(function(a,t){e(this).hasClass(g.formGroup)&&e(this).click()}),e("."+m.cancelButtonClass).each(function(a,t){e(this).hasClass(g.formGroup)&&e(this).click()})},this.cancelAll=function(){e("."+m.cancelButtonClass).each(function(a,t){e(this).hasClass(g.formGroup)&&e(this).click()})},this.update=function(a){m=e.extend(m,a)},this.reset=function(e){g.fileCounter=1,g.selectedFiles=0,g.errorLog.html(""),0!=e&&g.container.html("")},this.remove=function(){g.container.html(""),e(g).remove()},this.createProgress=function(e,a,t){var r=new h(this,m);r.progressDiv.show(),r.progressbar.width("100%");var s="";return s=m.showFileCounter?g.fileCounter+m.fileCounterStyle+e:e,m.showFileSize&&(s+=" ("+o(t)+")"),r.filename.html(s),g.fileCounter++,g.selectedFiles++,m.showPreview&&(r.preview.attr("src",a),r.preview.show()),m.showDownload&&(r.download.show(),r.download.click(function(){m.downloadCallback&&m.downloadCallback.call(g,[e])})),m.showDelete&&(r.del.show(),r.del.click(function(){r.statusbar.hide().remove();var a=[e];m.deleteCallback&&m.deleteCallback.call(this,a,r),g.selectedFiles-=1,u(m,g)})),r},this.getResponses=function(){return this.responses};var C=[],b=[],x=!1;return this}}(jQuery);